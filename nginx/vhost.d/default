http {
    upstream webapp {
        server core_app:5000;
    }   

    server {

        location / {
            root /var/www/react;
            proxy_redirect off;
            try_files $uri /index.html;
        }

        location /admin/ {
            proxy_pass http://webapp;
            proxy_redirect off;
        }

        location /graphql/ {
            proxy_pass http://webapp$request_uri
        }

        location /static_file_django/ {
            autoindex on;
            add_header Access-Control-Allow-Origin *;
            alias /app/static/;
        }

        location /static/ {
            autoindex on;
            add_header Access-Control-Allow-Origin *;
            alias /var/www/react/static/;
        }
    }
}